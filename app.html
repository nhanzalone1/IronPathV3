<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>IronPath V3</title>
<style>
  :root { --bg: #0f0f13; --card: #1a1a24; --text: #ffffff; --accent: #ff4757; --success: #2ed573; --dim: #888; }
  * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
  body { margin: 0; padding: 0; background-color: var(--bg); color: var(--text); font-family: -apple-system, system-ui, sans-serif; overflow-x: hidden; padding-bottom: 80px; }
  .hidden { display: none !important; }
  .btn { width: 100%; padding: 15px; border: none; border-radius: 12px; font-weight: 800; cursor: pointer; text-transform: uppercase; font-size: 14px; margin-top: 10px; }
  .btn-main { background: linear-gradient(135deg, #ff4757, #ff6b81); color: white; }
  .btn-sec { background: #333; color: white; }
  h1 { text-align: center; margin: 20px 0 5px; font-size: 24px; letter-spacing: -1px; }
  .sub { text-align: center; color: var(--dim); font-size: 11px; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 20px; }
  input { background: #121212; border: 1px solid #333; color: white; padding: 12px; border-radius: 8px; width: 100%; font-size: 16px; margin-bottom: 10px; }
  .view { padding: 20px; max-width: 600px; margin: 0 auto; animation: fade 0.3s; }
  @keyframes fade { from{opacity:0; transform:translateY(5px)} to{opacity:1; transform:translateY(0)} }
  .week { background: var(--card); border-radius: 12px; margin-bottom: 15px; border: 1px solid #333; overflow: hidden; }
  .week-head { display: flex; justify-content: space-between; padding: 15px; background: #222; border-bottom: 1px solid #333; font-weight: bold; }
  .day-row { display: flex; justify-content: space-between; padding: 15px; border-bottom: 1px solid #222; align-items: center; }
  .tag { font-size: 9px; padding: 3px 6px; border-radius: 4px; color: black; font-weight: 800; margin-left: 8px; text-transform: uppercase; }
  .tag-h { background: #ff4757; } .tag-l { background: #2ed573; } .tag-m { background: #ffa502; }
  .completed { text-decoration: line-through; opacity: 0.5; color: var(--success); }
  .chk { width: 20px; height: 20px; border: 2px solid #555; border-radius: 50%; margin-right: 10px; display: inline-block; }
  .completed .chk { background: var(--success); border-color: var(--success); }
  .split-card { background: var(--card); padding: 20px; border-radius: 15px; margin-bottom: 15px; border: 1px solid #333; text-align: center; cursor: pointer; transition: 0.2s; }
  .split-title { font-size: 18px; font-weight: bold; margin-bottom: 5px; color: white; }
  .split-desc { font-size: 12px; color: var(--dim); }
  .workout-day { display: flex; justify-content: space-between; align-items: center; background: #222; padding: 15px; border-radius: 10px; margin-bottom: 10px; border: 1px solid #333; cursor: pointer; }
  .ex-card { background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #333; }
  .ex-head { display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: bold; font-size: 15px; }
  .hist-text { font-size: 11px; color: var(--success); margin-bottom: 8px; display: block; font-weight: bold; }
  .input-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
  .tool-box { background: var(--card); padding: 20px; border-radius: 15px; margin-bottom: 20px; border: 1px solid #333; text-align: center; }
  .timer-display { font-size: 40px; font-weight: 900; margin: 15px 0; font-variant-numeric: tabular-nums; }
  .plate { padding: 5px 10px; border-radius: 4px; color: black; font-weight: bold; font-size: 11px; }
  .nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 70px; background: #181818; border-top: 1px solid #333; display: grid; grid-template-columns: 1fr 1fr 1fr; z-index: 1000; padding-bottom: 15px; }
  .nav-btn { background: none; border: none; color: #666; font-size: 10px; font-weight: bold; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; }
  .nav-btn.active { color: var(--accent); }
  .nav-icon { font-size: 20px; margin-bottom: 4px; }
</style>
</head>
<body>

<div id="view-program" class="view">
  <h1>IRONPATH</h1>
  <p class="sub">V3.0 // ENGINE</p>
  <div style="background:#222; padding:15px; border-radius:12px; border:1px solid #333; margin-bottom:20px;">
    <label style="font-size:11px; color:#888; font-weight:bold;">MAX / REP INPUT</label>
    <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
        <input type="number" id="w" placeholder="Weight">
        <input type="number" id="r" placeholder="Reps">
    </div>
    <button class="btn btn-main" onclick="genProgram()">Generate Cycle</button>
  </div>
  <div id="schedule-area"></div>
</div>

<div id="view-log" class="view hidden">
  <h1>TRAINING LOG</h1>
  <p class="sub">PROGRESSIVE OVERLOAD TRACKER</p>
  <div id="split-selector">
      <p style="text-align:center; color:white; margin-bottom:20px;">CHOOSE YOUR STRUCTURE</p>
      <div class="split-card" onclick="setSplit('PPL')"><div class="split-title">Push / Pull / Legs</div><div class="split-desc">6 Day Rotation. High Frequency.</div></div>
      <div class="split-card" onclick="setSplit('UL')"><div class="split-title">Upper / Lower</div><div class="split-desc">4 Day Rotation. Strength Focus.</div></div>
      <div class="split-card" onclick="setSplit('Arnold')"><div class="split-title">Arnold Split</div><div class="split-desc">Chest/Back, Shoulder/Arm, Legs.</div></div>
      <div class="split-card" onclick="setSplit('Bro')"><div class="split-title">Bro Split</div><div class="split-desc">Chest, Back, Legs, Shoulders, Arms.</div></div>
  </div>
  <div id="day-selector" class="hidden">
      <button class="btn btn-sec" onclick="resetSplit()" style="margin-bottom:20px; font-size:10px; padding:8px;">‚Üê CHANGE SPLIT</button>
      <div id="days-container"></div>
  </div>
  <div id="session-logger" class="hidden">
      <button class="btn btn-sec" onclick="closeSession()" style="margin-bottom:15px; width:auto;">‚Üê BACK</button>
      <h2 id="session-title" style="margin-top:0; color:var(--accent)"></h2>
      <div id="exercises-container"></div>
      <button class="btn btn-main" onclick="addCustomExercise()">+ Add Exercise</button>
      <button class="btn btn-sec" style="margin-top:30px; border:1px solid #555;" onclick="finishSession()">FINISH & SAVE LOG</button>
  </div>
</div>

<div id="view-tools" class="view hidden">
  <h1>TOOLS</h1>
  <p class="sub">GYM UTILITIES</p>
  <div class="tool-box">
      <h3 style="margin:0 0 15px 0; color:var(--accent)">REST TIMER</h3>
      <div class="timer-display" id="t-disp">00:00</div>
      <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:5px;">
          <button class="btn btn-sec" onclick="startTimer(90)">90s</button>
          <button class="btn btn-sec" onclick="startTimer(180)">3m</button>
          <button class="btn btn-sec" onclick="startTimer(300)">5m</button>
      </div>
      <button class="btn btn-main" style="margin-top:10px; background:#333;" onclick="clearInterval(timer);document.getElementById('t-disp').innerText='00:00'">STOP</button>
  </div>
  <div class="tool-box">
      <h3 style="margin:0 0 15px 0; color:var(--accent)">PLATE CALC</h3>
      <input type="number" id="pIn" placeholder="Target Weight (45+ lbs)">
      <button class="btn btn-main" style="background:var(--success); color:black;" onclick="calcPlates()">CALCULATE</button>
      <div id="pOut" style="margin-top:15px;"></div>
  </div>
  <div class="tool-box" style="border-color:#444;">
      <h3>DATA MANAGEMENT</h3>
      <button class="btn btn-sec" onclick="exportData()">EXPORT HISTORY (COPY)</button>
      <button class="btn btn-sec" style="color:#ff4757; border:1px solid #ff4757; background:transparent;" onclick="nuke()">FACTORY RESET APP</button>
  </div>
</div>

<div class="nav">
    <button class="nav-btn active" onclick="switchTab('program', this)"><span class="nav-icon">üìä</span> PROGRAM</button>
    <button class="nav-btn" onclick="switchTab('log', this)"><span class="nav-icon">üìù</span> LOG</button>
    <button class="nav-btn" onclick="switchTab('tools', this)"><span class="nav-icon">‚öí</span> TOOLS</button>
</div>

<script>
const SPLITS = {
    "PPL": {"PUSH":["Bench Press","Overhead Press","Incline Dumbbell","Lateral Raise","Tricep Pushdown"],"PULL":["Deadlift","Pullups","Barbell Row","Face Pulls","Bicep Curl"],"LEGS":["Squat","RDL","Leg Press","Leg Curl","Calf Raise"]},
    "UL": {"UPPER":["Bench Press","Barbell Row","Overhead Press","Pullups","Curls"],"LOWER":["Squat","RDL","Lunges","Leg Extension","Calf Raise"]},
    "Arnold": {"CHEST/BACK":["Bench Press","Pullups","Incline Dumbbell","Row","Flyes"],"SHOULDER/ARM":["Overhead Press","Lateral Raise","Barbell Curl","Skullcrusher"],"LEGS":["Squat","Leg Press","Lunges","Calf Raise"]},
    "Bro": {"CHEST":["Bench Press","Incline Press","Flyes"],"BACK":["Deadlift","Pullups","Rows"],"LEGS":["Squat","Leg Press","Calf Raise"],"SHOULDERS":["OHP","Lateral Raise","Rear Delt Fly"],"ARMS":["Barbell Curl","Tricep Extension","Hammer Curl"]}
};
let currentSplit = localStorage.getItem('userSplit') || null;
let customEx = JSON.parse(localStorage.getItem('customEx') || '{}'); 
let history = JSON.parse(localStorage.getItem('liftHistory') || '{}');

if(currentSplit) showDays(currentSplit);

function switchTab(id, btn) {
    document.querySelectorAll('.view').forEach(v => v.classList.add('hidden'));
    document.getElementById('view-'+id).classList.remove('hidden');
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
}
function setSplit(name) { currentSplit = name; localStorage.setItem('userSplit', name); showDays(name); }
function resetSplit() { if(confirm("Change Split?")) { currentSplit = null; localStorage.removeItem('userSplit'); document.getElementById('split-selector').classList.remove('hidden'); document.getElementById('day-selector').classList.add('hidden'); } }
function showDays(name) {
    document.getElementById('split-selector').classList.add('hidden');
    document.getElementById('day-selector').classList.remove('hidden');
    const c = document.getElementById('days-container'); c.innerHTML = "";
    Object.keys(SPLITS[name]).forEach(day => { c.innerHTML += `<div class="workout-day" onclick="openSession('${day}')"><b>${day}</b> <span>‚ñ∂</span></div>`; });
}
let activeDay = "";
function openSession(day) {
    activeDay = day; document.getElementById('day-selector').classList.add('hidden');
    document.getElementById('session-logger').classList.remove('hidden');
    document.getElementById('session-title').innerText = day + " SESSION"; renderExercises();
}
function closeSession() { document.getElementById('session-logger').classList.add('hidden'); document.getElementById('day-selector').classList.remove('hidden'); }
function renderExercises() {
    const box = document.getElementById('exercises-container'); box.innerHTML = "";
    let list = SPLITS[currentSplit][activeDay]; if(customEx[activeDay]) list = list.concat(customEx[activeDay]);
    list.forEach(ex => {
        const last = history[ex] || "No history";
        box.innerHTML += `<div class="ex-card"><div class="ex-head"><span>${ex}</span></div><span class="hist-text">LAST: ${last}</span><div class="input-group"><input type="number" placeholder="Lbs" id="w-${ex}"><input type="number" placeholder="Reps" id="r-${ex}"></div></div>`;
    });
}
function addCustomExercise() {
    const name = prompt("Exercise Name:");
    if(name) { if(!customEx[activeDay]) customEx[activeDay] = []; customEx[activeDay].push(name); localStorage.setItem('customEx', JSON.stringify(customEx)); renderExercises(); }
}
function finishSession() {
    if(!confirm("Finish & Save?")) return;
    let list = SPLITS[currentSplit][activeDay]; if(customEx[activeDay]) list = list.concat(customEx[activeDay]);
    list.forEach(ex => { const w = document.getElementById('w-'+ex).value; const r = document.getElementById('r-'+ex).value; if(w && r) history[ex] = `${w} lbs x ${r}`; });
    localStorage.setItem('liftHistory', JSON.stringify(history)); alert("Saved!"); closeSession();
}
let timer;
function startTimer(s) { clearInterval(timer); const end = Date.now() + s*1000; disp(s); timer = setInterval(()=>{const r=Math.round((end-Date.now())/1000); if(r<0){clearInterval(timer);document.getElementById('t-disp').innerText="DONE";return;} disp(r);},1000); }
function disp(s){const m=Math.floor(s/60);const r=s%60;document.getElementById('t-disp').innerText=`${m}:${r<10?'0':''}${r}`;}
function calcPlates() {
    const w = parseFloat(document.getElementById('pIn').value); const div = document.getElementById('pOut');
    if(!w || w<45) { div.innerText="45+ Only"; return; }
    let r=(w-45)/2, h=""; [45,35,25,10,5,2.5].forEach(s=>{while(r>=s){ let c="#eee";if(s==45)c="#45aaf2";if(s==25)c="#2ed573"; h+=`<span class="plate" style="background:${c}">${s}</span> `;r-=s; }});
    div.innerHTML = h + `<div style='margin-top:10px; color:#2ed573; font-weight:bold'>Load ${(w-45)/2}/side</div>`;
}
function nuke() { if(confirm("DELETE EVERYTHING?")) { localStorage.clear(); location.reload(); } }
function exportData() { navigator.clipboard.writeText(JSON.stringify(history)); alert("History copied to clipboard!"); }
function genProgram() {
    const w = parseFloat(document.getElementById('w').value); const r = parseFloat(document.getElementById('r').value); if(!w || !r) return;
    const rnd=n=>Math.round(n/5)*5; const max=rnd(w*(1+(0.033*r))); const rm5=rnd(max*0.87); const rm3=rnd(max*0.93);
    let html = `<div style="text-align:center; margin-bottom:20px; color:#2ed573; font-weight:bold; border:1px solid #333; padding:10px; border-radius:10px;">EST 1RM: ${max} LBS</div>`;
    const weeks = [{n:1,t:"BASE",b:rm5,m:.85,r:"5-6"},{n:2,t:"LOAD",b:rm5,m:.9,r:"5-6"},{n:3,t:"INTENSE",b:rm5,m:.95,r:"5-6"},{n:4,t:"PEAK",b:rm5,m:1.05,r:"5-6"},{n:5,t:"UNLOAD",b:rm5,m:.85,r:"2-4",f:.9},{n:6,t:"SPEED",b:rm3,m:1,r:"2-4",w:.75,f:.85},{n:7,t:"FORCE",b:rm3,m:1,r:"2-4",w:.85,f:.9},{n:8,t:"MAX",b:rm3,m:1,r:"2-3",w:.7,f:.85}];
    weeks.forEach(wk=>{ let m=rnd(wk.b*wk.m), wL=rnd(m*(wk.w||.85)), f=rnd(m*(wk.f||.95)); if(wk.n===4)wL=rnd(m*.8); html+=`<div class="week"><div class="week-head"><span>Week ${wk.n}</span><span style="color:#ff4757">${wk.t}</span></div>${row(wk.n, 'Mon', m, 'tag-h', 'H', wk.r)} ${row(wk.n, 'Wed', wL, 'tag-l', 'L', wk.r)} ${row(wk.n, 'Fri', f, 'tag-m', 'M', wk.r)}</div>`; });
    document.getElementById('schedule-area').innerHTML = html;
}
function row(wk, d, l, c, t, r) { const id = `w${wk}-${d}`; const done = localStorage.getItem(id) ? 'completed' : ''; return `<div class="day-row ${done}" id="row-${id}" onclick="tog('${id}')"><div style="display:flex;align-items:center"><span class="chk"></span><b>${d}</b></div><div><b>${l}x${r}</b><span class="tag ${c}">${t}</span></div></div>`; }
function tog(id) { const el = document.getElementById('row-'+id); if(el.classList.contains('completed')) { el.classList.remove('completed'); localStorage.removeItem(id); } else { el.classList.add('completed'); localStorage.setItem(id,'1'); } }
</script>
</body>
</html>
